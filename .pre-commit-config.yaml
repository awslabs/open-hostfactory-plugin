# Pre-commit hooks configuration
repos:
  - repo: local
    hooks:
      - id: format
        name: Auto-Format Code
        entry: make format
        language: system
        files: \.(py)$
        pass_filenames: false
        description: "Auto-format Python code with black and isort"
      
      - id: black
        name: Black (Code Formatting)
        entry: make ci-quality-black
        language: system
        files: \.(py)$
        pass_filenames: false
        description: "Check Python code formatting with Black"
      
      - id: isort
        name: isort (Import Sorting)
        entry: make ci-quality-isort
        language: system
        files: \.(py)$
        pass_filenames: false
        description: "Check Python import sorting with isort"
      
      - id: flake8
        name: flake8 (Style Guide)
        entry: make ci-quality-flake8
        language: system
        files: \.(py)$
        pass_filenames: false
        description: "Check Python style guide compliance with flake8"
      
      - id: quality-check
        name: Quality Check
        entry: make quality-check
        language: system
        files: \.(py|md|rst|txt|yaml|yml|json|toml)$
        pass_filenames: false
        description: "Run comprehensive professional quality checks"
      
      - id: validate-imports
        name: Validate Python Imports
        entry: make ci-imports
        language: system
        files: \.(py)$
        pass_filenames: false
        description: "Validate that all critical imports work correctly"
      
      - id: validate-cqrs
        name: Validate CQRS Patterns
        entry: make ci-arch-cqrs
        language: system
        files: \.(py)$
        pass_filenames: false
        description: "Validate CQRS architecture patterns"
        warning_only: true  # Allow this to fail without blocking commit
      
      - id: check-architecture
        name: Check Architecture Compliance
        entry: make ci-arch-clean
        language: system
        files: \.(py)$
        pass_filenames: false
        description: "Check Clean Architecture compliance"
        warning_only: true  # Allow this to fail without blocking commit
      
      - id: validate-imports-arch
        name: Validate Import Architecture
        entry: make ci-arch-imports
        language: system
        files: \.(py)$
        pass_filenames: false
        description: "Validate import architecture compliance"
        warning_only: true  # Allow this to fail without blocking commit
      
      - id: check-file-sizes-arch
        name: Check File Sizes (Architecture)
        entry: make ci-arch-file-sizes
        language: system
        files: \.(py)$
        pass_filenames: false
        description: "Check file sizes for architecture compliance"
        warning_only: true  # Allow this to fail without blocking commit
      
      - id: security-scan
        name: Security Scan
        entry: make security-scan
        language: system
        files: \.(py|txt|yml|yaml|toml|Dockerfile)$
        pass_filenames: false
        description: "Run comprehensive security scan"
        warning_only: true  # Allow this to fail without blocking commit
      
      - id: validate-workflows
        name: Validate Workflows
        entry: make validate-workflows
        language: system
        files: \.github/workflows/.*\.(yml|yaml)$
        pass_filenames: false
        description: "Validate GitHub Actions workflow YAML files"
      
      - id: detect-secrets
        name: Detect Hardcoded Secrets
        entry: make detect-secrets
        language: system
        files: ^src/.*\.py$
        pass_filenames: false
        description: "Detect potential hardcoded secrets in source code"
      
      - id: check-file-sizes
        name: Check File Sizes
        entry: make file-sizes
        language: system
        files: \.(py)$
        pass_filenames: false
        description: "Check for files that may violate Single Responsibility Principle"
        warning_only: true  # Allow this to fail without blocking commit
