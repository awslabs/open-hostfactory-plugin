[pytest]
# Test discovery patterns
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Test running options
addopts = -v --strict-markers --tb=short --durations=10 --maxfail=5

# Markers for test categorization
markers =
    unit: Unit tests - fast, isolated tests
    integration: Integration tests - test component interactions
    e2e: End-to-end tests - full workflow tests
    slow: Tests that take longer to run (>5 seconds)
    aws: Tests that interact with AWS services (mocked)
    api: Tests for API endpoints
    cli: Tests for CLI interface
    domain: Tests for domain layer
    application: Tests for application layer
    infrastructure: Tests for infrastructure layer
    providers: Tests for provider implementations
    architecture: Tests for architectural compliance and patterns
    patterns: Tests for design pattern implementations
    docker: Docker containerization tests
    benchmark: Performance benchmark tests
    performance: Performance benchmark tests
    asyncio: Asynchronous tests

# Logging configuration
log_cli = false
log_cli_level = WARNING
log_cli_format = %(asctime)s [%(levelname)8s] %(name)s: %(message)s (%(filename)s:%(lineno)s)
log_cli_date_format = %Y-%m-%d %H:%M:%S

# Ignore certain directories
norecursedirs =
    .git
    .tox
    .env
    .venv
    dist
    build
    migrations
    node_modules
    __pycache__
    .pytest_cache
    memory-bank
    docs/_build

# Configure xfail strict mode
xfail_strict = true

# Minimum version requirements
minversion = 7.0

# Filter warnings
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
    ignore::UserWarning:moto.*
    ignore::ResourceWarning
    ignore::UserWarning:dynaconf.*
