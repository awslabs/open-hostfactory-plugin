{
  "LaunchTemplateConfigs": [
    {
      "LaunchTemplateSpecification": {
        "LaunchTemplateId": "{{ launch_template_id }}",
        "Version": "{{ launch_template_version }}"
      }
    }
  ],
  "TargetCapacitySpecification": {
    "TotalTargetCapacity": {{ target_capacity }},
    "DefaultTargetCapacityType": "on-demand"
  },
  "Type": "instant",
  "TagSpecifications": [
    {
      "ResourceType": "fleet",
      "Tags": [
        {"Key": "Name", "Value": "{{ fleet_name }}"},
        {% for tag in base_tags %}
        {"Key": "{{ tag.key }}", "Value": "{{ tag.value }}"}{% if not loop.last or has_custom_tags %},{% endif %}
        {% endfor %}{% if has_custom_tags %},
        {% for tag in custom_tags %}
        {"Key": "{{ tag.key }}", "Value": "{{ tag.value }}"}{% if not loop.last %},{% endif %}
        {% endfor %}{% endif %}
      ]
    }
  ]
}
